[
  {
    "objectID": "posts/atividade 3/index.html",
    "href": "posts/atividade 3/index.html",
    "title": "Regressão linear",
    "section": "",
    "text": "Atividade 03\nNesta atividade, utilizei a formula matricial da regressão linear para ajustar uma reta aos dados de anos de estudo e salário.\nPrimeiro vamos começar carregando os dois arquivos de textos (x,y), e em seguida criamos a matriz.\n\nimport numpy as np\n\nvalores_x = np.loadtxt(\"x.txt\")\nvalores_y = np.loadtxt(\"y.txt\")\n\n# montamos a matriz\nx = np.column_stack((np.ones(len(valores_x)), valores_x))\n\n# transformamos y em coluna\ny = valores_y.reshape(-1, 1)\n\n# aplicamos a formula da regressao linear\nbeta = np.linalg.inv(x.T @ x) @ x.T @ y\n\n# aqui separamos os coeficientes\na = beta[0, 0]\nb = beta[1, 0]\n\nprint(\"Intercepto (a):\", a)\nprint(\"Inclinação (b):\", b)\n\nIntercepto (a): 373.93446839130695\nInclinação (b): 991.6278332981966\n\n\nApós feita a matriz agora é hora de montar um gráfico que vai exibir esse cálculo para nós:\n\nfrom plotnine import (\n    ggplot, aes, geom_point, geom_abline, theme, labs\n)\nimport pandas as pd\n\ndf = pd.DataFrame({\n    \"Anos de Estudo\": valores_x,\n    \"Salário\": valores_y\n})\n\nplot = (\n    ggplot(df, aes(\"Anos de Estudo\", \"Salário\"))\n    + geom_point()\n    + geom_abline(intercept=a, slope=b)\n    + labs(x=\"Anos de Estudo\", y=\"Salário (R$)\")\n    + theme(subplots_adjust={'right': 0.95})\n)\n\nplot.draw()\n\n/home/codespace/.python/current/lib/python3.12/site-packages/plotnine/themes/themeable.py:2486: FutureWarning: You no longer need to use subplots_adjust to make space for the legend or text around the panels. This parameter will be removed in a future version. You can still use 'plot_margin' 'panel_spacing' for your other spacing needs."
  },
  {
    "objectID": "posts/post-with-code/index.html",
    "href": "posts/post-with-code/index.html",
    "title": "Cotação do Dólar por Período",
    "section": "",
    "text": "Atividade 01\nNeste post mostrarei como criei uma rotina que analisa os dados da cotação do dólar no período de fevereiro de 2010.\nPrimeiro vamos começar criando a função cotar, que busca os dados de venda do dólar em X data, no meu caso 02/2010.\n\nimport requests\nfrom datetime import datetime, timedelta\n\ndef cotar(data):\n\n    url = fr\"https://olinda.bcb.gov.br/olinda/servico/PTAX/versao/v1/odata/\" \\\n          fr\"CotacaoDolarDia(dataCotacao=@dataCotacao)?@dataCotacao='{data}'&$format=json\"\n\n    res = requests.get(url)\n    res = res.json()\n\n    # caso exista dados para esse dia\n    if res['value']: \n        return res['value'][0]['cotacaoVenda']\n\n    # caso não exista dados, como sábado, domingo ou feriados\n    else:\n        dia_anterior = datetime.strptime(data, \"%m%d%Y\") - timedelta(days=1)\n        dia_anterior = datetime.strftime(dia_anterior, \"%m%d%Y\")\n        return cotar(dia_anterior)\n\nAgora com essa primeira etapa feita podemos seguir com a busca dos dados e exibir em um gráfico, utilizando o plotly.\n\nimport calendar\nfrom datetime import datetime, timedelta\nimport pandas as pd\nimport plotly.express as px\n\ndef cotacao_mes(mes_ano):\n\n    \"\"\"vai receber uma string no formato mes/ano.\n    e em seguida retorna um dataframe com a data e as respectiva cotação do dólar.\"\"\"\n\n    data_inicial = datetime.strptime(mes_ano, \"%m%Y\")\n\n    # essa parte descobre para gente o último dia do mês informado\n    ultimo_dia = calendar.monthrange(data_inicial.year, data_inicial.month)[1]\n    data_final = data_inicial.replace(day=ultimo_dia)\n\n    datas = []\n    cotacoes = []\n\n    data_atual = data_inicial\n\n    while data_atual &lt;= data_final:\n        data_formatada = data_atual.strftime(\"%m%d%Y\")\n        cotacao = cotar(data_formatada)\n\n        datas.append(data_atual.date())\n        cotacoes.append(cotacao)\n\n        data_atual += timedelta(days=1)\n\n    # criar dataFrame\n    df = pd.DataFrame({\n        \"Data\": datas,\n        \"Cotação (R$)\": cotacoes\n    })\n\n    return df\n\n\ndef plotar_cotacao(mes_ano):\n    \n    # essa função fica responsável por criar o gráfico\n    df = cotacao_mes(mes_ano)\n\n    fig = px.line(\n        df,\n        x=\"Data\",\n        y=\"Cotação (R$)\",\n        title=f\"Cotação do Dólar - {mes_ano[:2]}/{mes_ano[2:]}\",\n        labels={\"Data\": \"Dia\", \"Cotação (R$)\": \"Cotação do Dólar (Venda)\"}\n    )\n\n    fig.show()\n\n    return df\n\n\n# no nosso caso vai exibir fevereiro de 2010\ndf_fevereiro = plotar_cotacao(\"022010\")\n\n                            \n                                            \n\n\nE assim conseguimos fazer todo o acompanhamento do dólar no mês de fevereiro de 2010!"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this blog"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "meublog",
    "section": "",
    "text": "Cotação do Dólar por Período\n\n\n\napi\n\ncode\n\npython\n\ndolar\n\nanalise\n\n\n\n\n\n\n\n\n\nNov 23, 2025\n\n\nLuigi Del Vecchio\n\n\n\n\n\n\n\n\n\n\n\n\nMonitoramento de Frota de Ônibus\n\n\n\napi\n\ncode\n\npython\n\nmapa\n\n\n\n\n\n\n\n\n\nNov 23, 2025\n\n\nLuigi Del Vecchio\n\n\n\n\n\n\n\n\n\n\n\n\nRegressão linear\n\n\n\ncode\n\npython\n\ngrafico\n\n\n\n\n\n\n\n\n\nNov 23, 2025\n\n\nLuigi Del Vecchio\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/welcome/index.html",
    "href": "posts/welcome/index.html",
    "title": "Monitoramento de Frota de Ônibus",
    "section": "",
    "text": "Atividade 02\nNessa atividade eu mostro como criar um construir um mapa com os pontos de parada de uma linha de ônibus e também mostrar (caso possível) onde o ônibus está no momento da execução.\nPrimeiro realizamos a autenticação na API do SPTRNS, utilizando nosso TOKEN\n\nimport requests\n\nTOKEN = \"ea84177763f74df8756725d22f7b5f3140e40aed0acd375bce74b35b354c16b2\"\nBASE_URL = \"http://api.olhovivo.sptrans.com.br/v2.1\"\n\nsessao = requests.Session()\n\nlogin = sessao.post(\n    f\"{BASE_URL}/Login/Autenticar\",\n    params={\"token\": TOKEN}\n)\n\nif login.text != \"true\":\n    raise Exception(\"Erro na autenticação com o Olho Vivo\")\n\nApós a autenticação podemos realmente começar a montar o nosso mapa com as informações, informando qual é a URL e Linha, no nosso caso será a linha “8000” que é uma linha de teste da própria API, no momento que estava fazendo a ativdade acabei tomando limite de tempo e precisei usar essa linha.\n\nimport requests\nimport folium\nfrom IPython.display import display\n\nLINHA = \"8000\"\n\n# buscamos a linha informada\nlinha_response = sessao.get(\n    f\"{BASE_URL}/Linha/Buscar\",\n    params={\"termosBusca\": LINHA}\n)\n\nlinha_dados = linha_response.json()\n\nif not linha_dados:\n    raise Exception(\"linha não encontrada na API.\")\n\nprint(\"linhas retornadas pela API:\")\nfor linha in linha_dados:\n    print(linha)\n\ncodigo_linha = linha_dados[0][\"cl\"]\nprint(\"Código da linha:\", codigo_linha)\n\n# buscamos as paradas\nparadas_response = sessao.get(\n    f\"{BASE_URL}/Parada/BuscarParadasPorLinha\",\n    params={\"codigoLinha\": codigo_linha}\n)\n\nparadas = paradas_response.json()\n\nprint(\"Paradas encontradas:\", len(paradas))\n\nif not paradas:\n    print(\"nenhuma parada encontrada para essa linha!\")\n    print(\"Código usado:\", codigo_linha)\n    raise Exception(\"a API não retornou paradas.\")\n\n# buscamos a posicao do onibus no momento da execucao\nposicao_response = sessao.get(\n    f\"{BASE_URL}/Posicao/Linha\",\n    params={\"codigoLinha\": codigo_linha}\n)\n\nposicoes = posicao_response.json()\n\n# pegamos a posicao inicial da rota\nlat_base = paradas[0][\"py\"]\nlon_base = paradas[0][\"px\"]\n\nmapa = folium.Map(location=[lat_base, lon_base], zoom_start=13)\n\n# aqui adicionamos os marcadores nas paradas\nfor parada in paradas:\n    folium.Marker(\n        location=[parada[\"py\"], parada[\"px\"]],\n        popup=f\"Parada: {parada['np']}\",\n        icon=folium.Icon(color=\"red\", icon=\"info-sign\")\n    ).add_to(mapa)\n\n# aqui adicionamos os marcadores nos onibus\nfor veiculo in posicoes[\"vs\"]:\n    folium.Marker(\n        location=[veiculo[\"py\"], veiculo[\"px\"]],\n        popup=f\"Ônibus - Prefixo: {veiculo['p']}\",\n        icon=folium.Icon(color=\"blue\", icon=\"bus\")\n    ).add_to(mapa)\n\ndisplay(mapa)\n\nlinhas retornadas pela API:\n{'cl': 2506, 'lc': False, 'lt': '8000', 'sl': 1, 'tl': 1, 'tp': 'PÇA. RAMOS DE AZEVEDO', 'ts': 'TERM. LAPA'}\n{'cl': 35274, 'lc': False, 'lt': '8000', 'sl': 2, 'tl': 1, 'tp': 'PÇA. RAMOS DE AZEVEDO', 'ts': 'TERM. LAPA'}\n{'cl': 1273, 'lc': False, 'lt': '8000', 'sl': 1, 'tl': 10, 'tp': 'PÇA. RAMOS DE AZEVEDO', 'ts': 'TERM. LAPA'}\n{'cl': 34041, 'lc': False, 'lt': '8000', 'sl': 2, 'tl': 10, 'tp': 'PÇA. RAMOS DE AZEVEDO', 'ts': 'TERM. LAPA'}\nCódigo da linha: 2506\nParadas encontradas: 15\n\n\nMake this Notebook Trusted to load map: File -&gt; Trust Notebook\n\n\nAgora com o mapa gerado, podemos acompanhar os ônibus (marcadores azuis) e as paradas dessa linha (marcadores vermelhos)."
  }
]